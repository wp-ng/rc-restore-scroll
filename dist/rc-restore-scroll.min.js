!function(o){"use strict";var i,s;o.hasInitialised||(i={removeItem:function(t){"undefined"!=typeof sessionStorage&&sessionStorage.removeItem(t)},setItem:function(t,i){"undefined"!=typeof sessionStorage&&("object"==typeof i&&(i=JSON.stringify(i)),sessionStorage.setItem(t,i))},getItem:function(t){if("undefined"!=typeof sessionStorage)try{var i=sessionStorage.getItem(t),s=JSON.parse(i);return"object"==typeof s?s:i}catch(t){return null}return null},isPlainObject:function(t){return"object"==typeof t&&null!==t&&t.constructor===Object},deepExtend:function(t,i){for(var s in i)i.hasOwnProperty(s)&&(s in t&&this.isPlainObject(t[s])&&this.isPlainObject(i[s])?this.deepExtend(t[s],i[s]):t[s]=i[s]);return t}},s={id:null,timeoutHeight:1e3,size:25,timeout:300,offset:0},o={initialise:function(t){i.deepExtend(this.options={},s),i.isPlainObject(t)&&i.deepExtend(this.options,t),this.history=i.getItem("scrollHistory")||{},"object"==typeof this.history?this.history.urls&&Array.isArray(this.history.urls)&&this.history.scrolly&&Array.isArray(this.history.scrolly)||(this.history.urls=[],this.history.scrolly=[]):this.history={urls:[],scrolly:[]},this.options.timeoutHeight=parseInt(this.options.timeoutHeight,10),this.options.size=parseInt(this.options.size,10),this.options.timeout=parseInt(this.options.timeout,10),this.options.offset=parseInt(this.options.offset,10),this.options.timeout||(this.options.timeout=s.timeout),window.addEventListener("DOMContentLoaded",o.restoreScroll),window.addEventListener("beforeunload",o.saveScroll)},setSize:function(t){this.options.size=parseInt(t,10)},setTimeout:function(t){this.options.timeout=parseInt(t,10)},getSize:function(t){return this.options.size},getTimeout:function(t){return this.options.timeout},getHistory:function(t){if(t){t=this.history.urls.indexOf(t);if(-1!==t)return{url:this.history.urls[t],scrolly:this.history.scrolly[t]}}return{url:null,scrolly:{pos:0,id:null,height:null}}},removeHistory:function(t){var i=this.history.urls.indexOf(t),t=this.history.urls.indexOf(t+"#/");if(-1!==i&&(this.history.urls.splice(i,1),this.history.scrolly.splice(i,1)),-1!==t&&(this.history.urls.splice(t,1),this.history.scrolly.splice(t,1)),this.history.urls.length>this.options.size)for(var s=0;s<this.history.urls.length-this.options.size;s++)this.history.urls.splice(s,1),this.history.scrolly.splice(s,1)},addHistory:function(t,i,s,o){var e=this.history.urls.indexOf(t);-1!==e?this.history.scrolly[e]={pos:i,id:s,height:o}:(this.history.urls.push(t),this.history.scrolly.push({pos:i,id:s,height:o}))},saveHistory:function(){i.setItem("scrollHistory",this.history)},restoreScroll:function(){var t,i=window.location.href,s=o.getHistory(i);s.url&&(o.removeHistory(s.url),o.saveHistory(),s.scrolly&&"object"==typeof s.scrolly&&(window.scrollTo(0,0),s.scrolly.id&&s.scrolly.height&&((t=document.getElementById(s.scrolly.id))&&(t.style.minHeight=s.scrolly.height+"px",setTimeout(function(){t.style.minHeight=null},o.options.timeoutHeight))),setTimeout(function(){window.scrollTo(0,s.scrolly.pos+o.options.offset)},o.options.timeout)))},saveScroll:function(){var t=document.activeElement.href,i=window.location.href;t&&o.removeHistory(t);t=document.getElementById(o.options.id),t=t?parseInt(t.clientHeight,10):null;o.addHistory(i,parseInt(window.scrollY,10),o.options.id,t),o.saveHistory()},destroy:function(){window.removeEventListener("DOMContentLoaded",o.restoreScroll),window.removeEventListener("beforeunload",o.saveScroll)},hasInitialised:!0},window.rcrs=o)}(window.rcrs||{});