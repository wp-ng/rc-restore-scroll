!function(i){"use strict";var s,o;i.hasInitialised||(s={removeItem:function(t){"undefined"!=typeof sessionStorage&&sessionStorage.removeItem(t)},setItem:function(t,s){"undefined"!=typeof sessionStorage&&("object"==typeof s&&(s=JSON.stringify(s)),sessionStorage.setItem(t,s))},getItem:function(t){if("undefined"!=typeof sessionStorage)try{var s=sessionStorage.getItem(t),i=JSON.parse(s);return"object"==typeof i?i:s}catch(t){return null}return null},isPlainObject:function(t){return"object"==typeof t&&null!==t&&t.constructor===Object},deepExtend:function(t,s){for(var i in s)s.hasOwnProperty(i)&&(i in t&&this.isPlainObject(t[i])&&this.isPlainObject(s[i])?this.deepExtend(t[i],s[i]):t[i]=s[i]);return t}},o={size:25,timeout:300,offset:0},i={initialise:function(t){s.deepExtend(this.options={},o),s.isPlainObject(t)&&s.deepExtend(this.options,t),this.history=s.getItem("scrollHistory")||{},"object"==typeof this.history?this.history.urls&&Array.isArray(this.history.urls)&&this.history.scrolly&&Array.isArray(this.history.scrolly)||(this.history.urls=[],this.history.scrolly=[]):this.history={urls:[],scrolly:[]},this.options.size=parseInt(this.options.size,10),this.options.timeout=parseInt(this.options.timeout,10),this.options.offset=parseInt(this.options.offset,10),this.options.timeout||(this.options.timeout=o.timeout),window.addEventListener("DOMContentLoaded",i.restoreScroll),window.addEventListener("beforeunload",i.saveScroll)},setSize:function(t){this.options.size=parseInt(t,10)},setTimeout:function(t){this.options.timeout=parseInt(t,10)},getSize:function(t){return this.options.size},getTimeout:function(t){return this.options.timeout},getHistory:function(t){if(t){t=this.history.urls.indexOf(t);if(-1!==t)return{url:this.history.urls[t],scrolly:this.history.scrolly[t]}}return{url:null,scrolly:0}},removeHistory:function(t){var s=this.history.urls.indexOf(t),t=this.history.urls.indexOf(t+"#/");if(-1!==s&&(this.history.urls.splice(s,1),this.history.scrolly.splice(s,1)),-1!==t&&(this.history.urls.splice(t,1),this.history.scrolly.splice(t,1)),this.history.urls.length>this.options.size)for(var i=0;i<this.history.urls.length-this.options.size;i++)this.history.urls.splice(i,1),this.history.scrolly.splice(i,1)},addHistory:function(t,s){var i=this.history.urls.indexOf(t);-1!==i?this.history.scrolly[i]=s:(this.history.urls.push(t),this.history.scrolly.push(s))},saveHistory:function(){s.setItem("scrollHistory",this.history)},restoreScroll:function(){var t=window.location.href,s=i.getHistory(t);s.url&&(i.removeHistory(s.url),i.saveHistory(),setTimeout(function(){window.scrollTo(0,s.scrolly+i.options.offset)},i.options.timeout))},saveScroll:function(){var t=document.activeElement.href,s=window.location.href;t&&i.removeHistory(t),i.addHistory(s,parseInt(window.scrollY,10)),i.saveHistory()},destroy:function(){window.removeEventListener("DOMContentLoaded",i.restoreScroll),window.removeEventListener("beforeunload",i.saveScroll)},hasInitialised:!0},window.rcrs=i)}(window.rcrs||{});